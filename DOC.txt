–û—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ –∑–∞ —Ñ–∞–π–ª—ã –∏ –ø–æ—è—Å–Ω–µ–Ω–∏–µ! –ù–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ —è —Å–æ—Å—Ç–∞–≤–ª—é –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, —á—Ç–æ–±—ã –µ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –≤–æ—Å—Å–æ–∑–¥–∞—Ç—å —Å –Ω—É–ª—è. –û–ø–∏—Å–∞–Ω–∏–µ –±—É–¥–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º, —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –∫–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.
–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ —Å –∫–∞–º–µ—Ä—ã

–¶–µ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ —Å –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å IP-–∫–∞–º–µ—Ä—ã –ø–æ RTSP-–ø—Ä–æ—Ç–æ–∫–æ–ª—É). –û–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –≤ –∑–∞–¥–∞–Ω–Ω—ã—Ö –∑–æ–Ω–∞—Ö, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±—ä–µ–∫—Ç–∞ (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –Ω–æ–º–µ—Ä–∞) –≤ –∑–æ–Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–∞ (ROI) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π.

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∏ —è–∑—ã–∫:

    –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è: Python.
    –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: OpenCV (cv2), FFmpeg (ffmpeg-python), Tkinter (tkinter), PIL (Pillow), numpy, configparser, subprocess, threading.
    –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: FFmpeg –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π PATH.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–¥—É–ª—å–Ω–æ–µ, —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª–∞—Å—Å–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –∑–∞–¥–∞—á—É. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ config.ini. –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (GUI) –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–æ–º –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∑–æ–Ω—ã –¥–µ—Ç–µ–∫—Ü–∏–∏.
–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

    ConfigManager (config_manager.py)
    –£–ø—Ä–∞–≤–ª—è–µ—Ç —á—Ç–µ–Ω–∏–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ —Ñ–∞–π–ª–∞ config.ini.
        –§—É–Ω–∫—Ü–∏–∏:
            –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞ –∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç —Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –æ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
            –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π (—Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞, —Å–ø–∏—Å–∫–∏ —á–∏—Å–µ–ª).
        –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
            [RTSP]: url ‚Äî –∞–¥—Ä–µ—Å –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, rtsp://your_rtsp_url).
            [Directories]: save_dir ‚Äî –ø–∞–ø–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é captured_cars).
            [MotionDetection]:
                motion_rect1, motion_rect2 ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–≤—É—Ö –∑–æ–Ω –¥–µ—Ç–µ–∫—Ü–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è (x, y, —à–∏—Ä–∏–Ω–∞, –≤—ã—Å–æ—Ç–∞).
                threshold ‚Äî –ø–æ—Ä–æ–≥ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –¥–≤–∏–∂–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50).
                delay ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è–º–∏ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1.0 —Å–µ–∫).
            [ROICheck]:
                roi_rect ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–æ–Ω—ã –∏–Ω—Ç–µ—Ä–µ—Å–∞ (ROI) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –æ–±—ä–µ–∫—Ç–∞.
                presence_threshold_percent ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –±–µ–ª—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π –≤ ROI –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞–ª–∏—á–∏—è –æ–±—ä–µ–∫—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.3).
                min_save_interval ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2.0 —Å–µ–∫).
            [UI]: resize_handle_size ‚Äî —Ä–∞–∑–º–µ—Ä –º–∞—Ä–∫–µ—Ä–æ–≤ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–æ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8 –ø–∏–∫—Å–µ–ª–µ–π).
        –õ–æ–≥–∏–∫–∞:
            –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ config.ini —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ñ–∞–π–ª —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.
            –ú–µ—Ç–æ–¥—ã get, get_int, get_float, get_list_int –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º.
    VideoStreamHandler (video_stream_handler.py)
    –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ RTSP-–ø–æ—Ç–æ–∫—É –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–∞–¥—Ä–æ–≤.
        –§—É–Ω–∫—Ü–∏–∏:
            –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FFmpeg (—á–µ—Ä–µ–∑ subprocess).
            –ü–æ–ª—É—á–∞–µ—Ç –∫–∞–¥—Ä—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ BGR, –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏—Ö –≤ –æ—Ç—Ç–µ–Ω–∫–∏ —Å–µ—Ä–æ–≥–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.
            –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è —á—Ç–µ–Ω–∏—è –∫–∞–¥—Ä–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.
        –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
            –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ffmpeg-python –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Ç–æ–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (—à–∏—Ä–∏–Ω–∞, –≤—ã—Å–æ—Ç–∞).
            –ü—Ä–∏ —Å–±–æ—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Ç–µ—Ä–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã.
            –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã: read_frame (BGR-–∫–∞–¥—Ä), get_frame_grayscale (—Å–µ—Ä—ã–π –∫–∞–¥—Ä), get_frame_rgb (RGB-–∫–∞–¥—Ä).
            –õ–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ FFmpeg –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ü–æ—Ç–æ–∫ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω").
    MotionDetector (motion_detector.py)
    –î–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –≤ –¥–≤—É—Ö –∑–∞–¥–∞–Ω–Ω—ã—Ö –∑–æ–Ω–∞—Ö (motion_rect1, motion_rect2).
        –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
            –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–æ–Ω (motion_rect1, motion_rect2).
            –ü–æ—Ä–æ–≥ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (threshold).
            –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è–º–∏ (delay).
        –õ–æ–≥–∏–∫–∞:
            –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∫–∞–¥—Ä—ã –≤ –æ—Ç—Ç–µ–Ω–∫–∞—Ö —Å–µ—Ä–æ–≥–æ.
            –í—ã—á–∏—Å–ª—è–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É –ø–∏–∫—Å–µ–ª–µ–π –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è.
            –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True, –µ—Å–ª–∏ –¥–≤–∏–∂–µ–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –≤ –ª—é–±–æ–π –∏–∑ –∑–æ–Ω, –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è.
    ROIManager (roi_manager.py)
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≤ –∑–æ–Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–∞ (ROI), –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞.
        –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
            –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–æ–Ω—ã ROI (roi_rect: x, y, —à–∏—Ä–∏–Ω–∞, –≤—ã—Å–æ—Ç–∞).
            –ü–æ—Ä–æ–≥ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è (presence_threshold_percent) ‚Äî –¥–æ–ª—è –±–µ–ª—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π.
        –õ–æ–≥–∏–∫–∞:
            –ò–∑–≤–ª–µ–∫–∞–µ—Ç –æ–±–ª–∞—Å—Ç—å ROI –∏–∑ RGB-–∫–∞–¥—Ä–∞.
            –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –µ—ë –≤ –æ—Ç—Ç–µ–Ω–∫–∏ —Å–µ—Ä–æ–≥–æ –∏ –±–∏–Ω–∞—Ä–∏–∑—É–µ—Ç (–ø–æ—Ä–æ–≥ 200).
            –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –±–µ–ª—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π.
            –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True, –µ—Å–ª–∏ –¥–æ–ª—è –±–µ–ª—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π –ø—Ä–µ–≤—ã—à–∞–µ—Ç –∑–∞–¥–∞–Ω–Ω—ã–π –ø–æ—Ä–æ–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30%).
    ImageSaver (image_saver.py)
    –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∑–∞–¥–∞–Ω–Ω—É—é –ø–∞–ø–∫—É –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π.
        –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
            –ü–∞–ø–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (save_dir).
            –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è–º–∏ (min_save_interval).
        –õ–æ–≥–∏–∫–∞:
            –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø—Ä–æ—à–ª–æ –ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.
            –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–¥—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ PNG —Å –∏–º–µ–Ω–µ–º –≤–∏–¥–∞ car_–ì–ì–ì–ì–ú–ú–î–î_–ß–ß–ú–ú–°–°.png.
            –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∫–∞–¥—Ä –∏–∑ RGB –≤ BGR –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º.
    GUIHandler (gui_handler.py)
    –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–æ–Ω.
        –§—É–Ω–∫—Ü–∏–∏:
            –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –≤ –æ–∫–Ω–µ Tkinter (—Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1280x720).
            –†–∏—Å—É–µ—Ç –∑–æ–Ω—ã –¥–µ—Ç–µ–∫—Ü–∏–∏: motion_rect1 (–∫—Ä–∞—Å–Ω–∞—è), motion_rect2 (—Å–∏–Ω—è—è), ROI (–∑–µ–ª—ë–Ω–∞—è).
            –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å —Ä–∞–∑–º–µ—Ä—ã –∑–æ–Ω —Å –ø–æ–º–æ—â—å—é –º—ã—à–∏.
            –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–∞—Ä–∫–µ—Ä—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤ (–∂—ë–ª—Ç—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã) –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏.
            –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–æ–Ω –≤ config.ini.
        –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π:
            –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏—è –º—ã—à–∏ (on_mouse_press), –¥–≤–∏–∂–µ–Ω–∏–µ (on_mouse_move), –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ (on_mouse_release).
            –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∑–æ–Ω –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ (8 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π: —É–≥–ª—ã –∏ —Å—Ç–æ—Ä–æ–Ω—ã).
            –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–æ–Ω, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –≤—ã—Ö–æ–¥–∏–ª–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–∞–¥—Ä–∞.
        –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–¥—Ä–æ–≤:
            –í—ã–∑—ã–≤–∞–µ—Ç update_frame –∫–∞–∂–¥—ã–µ 50 –º—Å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.
            –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ (motion_detector.detect) –∏ –Ω–∞–ª–∏—á–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≤ ROI (roi_manager.is_object_present).
            –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–¥—Ä (image_saver.save), –µ—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –¥–≤–∏–∂–µ–Ω–∏–µ –∏ –æ–±—ä–µ–∫—Ç –≤ ROI, —Å —É—á—ë—Ç–æ–º –∑–∞–¥–µ—Ä–∂–∫–∏.
    Main (main.py)
    –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø–µ—Ä–µ–¥–∞–≤–∞—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ config.ini.
        –ó–∞–ø—É—Å–∫–∞–µ—Ç GUI —á–µ—Ä–µ–∑ gui_handler.run().

–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

    –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
        –ß–∏—Ç–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ config.ini (–∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
        –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –ø–æ RTSP-–∞–¥—Ä–µ—Å—É.
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∑–æ–Ω—ã –¥–µ—Ç–µ–∫—Ü–∏–∏ –∏ ROI –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
    –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª:
        –í–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –æ–∫–Ω–µ GUI.
        –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å –∏–ª–∏ –∏–∑–º–µ–Ω—è—Ç—å –∑–æ–Ω—ã (–¥–≤–µ –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è, –æ–¥–Ω–∞ –¥–ª—è ROI).
        –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è –≤ –ª—é–±–æ–π –∏–∑ –∑–æ–Ω (motion_rect1 –∏–ª–∏ motion_rect2) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≤ ROI.
        –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ–º–µ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è), –∫–∞–¥—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–∞–ø–∫—É save_dir —Å —É—á—ë—Ç–æ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ min_save_interval.
    –£—Å–ª–æ–≤–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
        –î–≤–∏–∂–µ–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –≤ –æ–¥–Ω–æ–π –∏–∑ –∑–æ–Ω (motion_detector.detect –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç True).
        –ü—Ä–æ—à–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è (motion_detector.delay).
        –í –∑–æ–Ω–µ ROI –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—ä–µ–∫—Ç (roi_manager.is_object_present –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç True).
        –ü—Ä–æ—à–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (image_saver.min_save_interval).
    –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ:
        –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞ (WM_DELETE_WINDOW) –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã.

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞

    –°–∏—Å—Ç–µ–º–∞: Windows/Linux/MacOS —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º Python 3.x.
    –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:
        opencv-python
        ffmpeg-python
        Pillow
        numpy
    FFmpeg: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ PATH.
    RTSP-–ø–æ—Ç–æ–∫: –î–æ—Å—Ç—É–ø–Ω—ã–π –∞–¥—Ä–µ—Å –∫–∞–º–µ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, rtsp://username:password@ip_address/stream).
    –ü–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è: –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é captured_cars).

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (config.ini)
ini
[RTSP]
url = rtsp://admin:12345@192.168.1.100:554/stream

[Directories]
save_dir = captured_cars

[MotionDetection]
threshold = 50
delay = 1.0
motion_rect1 = 50, 50, 100, 80
motion_rect2 = 150, 100, 120, 90

[ROICheck]
presence_threshold_percent = 0.3
min_save_interval = 2.0
roi_rect = 200, 150, 120, 90

[UI]
resize_handle_size = 8
–ö–∞–∫ –≤–æ—Å—Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

    –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞:
    text

project/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ config.ini
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config_manager.py
‚îÇ   ‚îú‚îÄ‚îÄ video_stream_handler.py
‚îÇ   ‚îú‚îÄ‚îÄ motion_detector.py
‚îÇ   ‚îú‚îÄ‚îÄ roi_manager.py
‚îÇ   ‚îú‚îÄ‚îÄ image_saver.py
‚îÇ   ‚îú‚îÄ‚îÄ gui_handler.py
‚îú‚îÄ‚îÄ main.py
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏.
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
bash
pip install opencv-python ffmpeg-python Pillow numpy
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ FFmpeg:

    –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ FFmpeg –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ ffmpeg –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ config.ini:

    –£–∫–∞–∂–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π RTSP-–∞–¥—Ä–µ—Å.
    –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–æ–Ω –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
bash

    python main.py
    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
        –í–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –≤ –æ–∫–Ω–µ.
        –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ –∑–æ–Ω—ã (–∫—Ä–∞—Å–Ω–∞—è, —Å–∏–Ω—è—è ‚Äî –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è; –∑–µ–ª—ë–Ω–∞—è ‚Äî ROI) –∏–ª–∏ –∏–∑–º–µ–Ω—è–π—Ç–µ –∏—Ö —Ä–∞–∑–º–µ—Ä—ã.
        –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ –ø–∞–ø–∫—É save_dir –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è –∏ –æ–±—ä–µ–∫—Ç–∞ –≤ ROI.

–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

    –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.
    –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ GUI (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Ä–æ–≥ –¥–≤–∏–∂–µ–Ω–∏—è, –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã).
    –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞–º–µ—Ä.
    –£–ª—É—á—à–∏—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –¥–µ—Ç–µ–∫—Ü–∏–∏ –Ω–æ–º–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è).
    –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

–≠—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–¥—Ä–æ–±–Ω—ã–º, —á—Ç–æ–±—ã –≤–æ—Å—Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —á—Ç–æ-—Ç–æ —É—Ç–æ—á–Ω–∏—Ç—å, –¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞—Å–ø–µ–∫—Ç ‚Äî –¥–∞–π –∑–Ω–∞—Ç—å! üöóüì∏